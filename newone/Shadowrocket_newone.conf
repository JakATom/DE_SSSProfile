[General]
# Shadowrocket 配置
#
# 参考：
# DNS泄露 https://cf.buliang0.cf/shadowrocket-rules/nodnsleak-pk.ini
# https://raw.githubusercontent.com/Tartarus2014/Shadowrocket-Script/main/Shadowrocket.conf
# 小火箭支持的REJECT内置策略：REJECT, REJECT-TINYGIF, REJECT-IMG, REJECT-200 参考 https://w37fhy.com/archives/776
# china /DNS /general / telegram 规则： https://github.com/VirgilClyne/VirgilClyne/tree/main/modules/ASN
# 建议在「其他设置」里「GeoLite2」的「来源」填写使用「 https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb 或 https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country-only-cn-private.mmdb 」并开启「自动更新」
#
# 模块：
#   屏蔽iOS/iPadOS系统更新 https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Module/Block/SoftwareUpdate.sgmodule
#
bypass-system = true
#
bypass-tun = localhost, *.local, captive.apple.com, e.crashlytics.com, www.baidu.com, passenger.t3go.cn, yunbusiness.ccb.com, wxh.wo.cn, gate.lagou.com, www.abchina.com.cn, login-service.mobile-bank.psbc.com, mobile-bank.psbc.com, 10.0.0.0/8, 127.0.0.1/32, 172.16.0.0/12, 192.168.0.0/16, 192.168.122.1/32, 193.168.0.1/32, ::1/128, fe80::/10 
#
skip-proxy = localhost, *.local, captive.apple.com, e.crashlytics.com, www.baidu.com, passenger.t3go.cn, yunbusiness.ccb.com, wxh.wo.cn, gate.lagou.com, www.abchina.com.cn, login-service.mobile-bank.psbc.com, mobile-bank.psbc.com, 10.0.0.0/8, 127.0.0.1/32, 172.16.0.0/12, 192.168.0.0/16, 192.168.122.1/32, 193.168.0.1/32, ::1/128, fe80::/10
#
tun-excluded-routes = 10.0.0.0/8,127.0.0.0/8,169.254.0.0/16,192.0.2.0/24,192.168.0.0/16,198.51.100.0/24,224.0.0.0/4,*.local,localhostlocal,*.cmpassport.com,*.jegotrip.com.cn,*.icitymobile.mobi,id6.me,*.pingan.com.cn,*.cmbchina.com,Mijia Cloud,dlg.io.mi.com, *.kalay.net.cn
#
hijack-dns = 0.0.0.0:53
dns-server = https://1.12.12.12/dns-query,https://223.5.5.5/dns-query,https://223.6.6.6/dns-query,https://120.53.53.53/dns-query
#
# ipv6 
ipv6 = false
#prefer-ipv6 = true
#
dns-fallback-system = false
dns-direct-system = false
icmp-auto-reply = true
always-reject-url-rewrite = false
## 如果关闭该选项，域名解析返回私有IP，shadowrocket会认为该域名被劫持而强制使用代理。
private-ip-answer = false
dns-direct-fallback-proxy = false
udp-policy-not-supported-behaviour = REJECT


update-url = https://raw.githubusercontent.com/JakATom/DE_SSSProfile/newone/newone/Shadowrocket_newone.conf


[Proxy Group]
PROXY = select,SB-REALITY,SB-REALITY-V6,SB-REALITY-WARP,SB-REALITY-WARP-V6,policy-select-name=SB-REALITY
#
FINALFINAL = select,PROXY, DIRECT, REJECT
#
TTOR = select,SB-REALITY-TOR,SB-REALITY-TOR-V6,policy-select-name=SB-REALITY-TOR
#
WWARP = select,SB-REALITY-WARP,SB-REALITY-WARP-V6,policy-select-name=SB-REALITY-WARP


[Rule]

# Block iOS iPadOS Update
DOMAIN,mesu.apple.com,REJECT
DOMAIN,gdmf.apple.com,REJECT
DOMAIN,updates-http.cdn-apple.com,REJECT
DOMAIN,xp.apple.com,REJECT
DOMAIN,gdmf.v.aaplimg.com,REJECT
#

# block udp 443
AND,((DEST-PORT,443), (NETWORK,UDP),(NOT,(GEOIP,CN))),REJECT-NO-DROP
# block stun
AND,(NETWORK,STUN),REJECT

# > Block YouTube QUIC
AND,((NETWORK,UDP), (DOMAIN-SUFFIX,googlevideo.com)),REJECT
# > Block Bilibili/Douyu P2P CDN
AND,((NETWORK,UDP), (OR,((DOMAIN-KEYWORD,bilibili), (DOMAIN-KEYWORD,biliapi), (DOMAIN-KEYWORD,mcdn), (DOMAIN-KEYWORD,douyu)))),REJECT
AND,((NETWORK,TCP), (OR,((DOMAIN-KEYWORD,stun), (DOMAIN-KEYWORD,douyu)))),REJECT
#
# > Safari 防跳转
DOMAIN,app-site-association.cdn-apple.com,REJECT
# 阻止电报频繁请求
AND,((PROCESS-NAME,Telegram), (OR,((IP-CIDR,0.0.0.0/8), (IP-CIDR,224.0.0.0/4)))),REJECT
#

# 网友 deeplx
DOMAIN,deeplx.mingming.dev,DIRECT
#
#
# -------- reject --------
RULE-SET,https://raw.githubusercontent.com/JakATom/DE_SSSProfile/newone/newone/sogouinput.list,REJECT
#
#  -------- tor  --------
RULE-SET,https://raw.githubusercontent.com/JakATom/DE_SSSProfile/newone/newone/tor.list,TTOR
#
#  -------- warp  --------
RULE-SET,https://raw.githubusercontent.com/JakATom/DE_SSSProfile/newone/newone/warp.list,WWARP
#
# -------- DOMAIN --------
RULE-SET,https://raw.githubusercontent.com/JakATom/DE_SSSProfile/newone/newone/domain_proxy_domain.list,PROXY
RULE-SET,https://raw.githubusercontent.com/JakATom/DE_SSSProfile/newone/newone/domain_direct_domain.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/JakATom/DE_SSSProfile/newone/newone/domain_proxy_suffix.list,PROXY
RULE-SET,https://raw.githubusercontent.com/JakATom/DE_SSSProfile/newone/newone/domain_direct_suffix.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/JakATom/DE_SSSProfile/newone/newone/domain_proxy_keyword.list,PROXY
RULE-SET,https://raw.githubusercontent.com/JakATom/DE_SSSProfile/newone/newone/domain_direct_keyword.list,DIRECT
# proxy  USER-AGENT
RULE-SET,https://raw.githubusercontent.com/JakATom/DE_SSSProfile/newone/newone/useragent_proxy.list,PROXY
# direct USER-AGENT
RULE-SET,https://raw.githubusercontent.com/JakATom/DE_SSSProfile/newone/newone/useragent_direct.list,DIRECT
# proxy
RULE-SET,https://raw.githubusercontent.com/JakATom/DE_SSSProfile/newone/newone/ip_proxy.list,PROXY
# direct
RULE-SET,https://raw.githubusercontent.com/JakATom/DE_SSSProfile/newone/newone/ip_direct.list,DIRECT
#
RULE-SET,https://raw.githubusercontent.com/JakATom/DE_SSSProfile/newone/newone/asn.cn.list,DIRECT
#
#
# Surge 的自动 REJECT 保护丢包，防止应用循环请求
IP-CIDR,0.0.0.0/32,REJECT,no-resolve
#
#
GEOIP,CN,DIRECT,no-resolve
#
FINAL,FINALFINAL
#

[Host]

localhost = 127.0.0.1

[URL Rewrite]
^https?:\/\/(www.)?(g|google)\.cn https://www.google.com 302
^https?:\/\/(ditu|maps).google\.cn https://maps.google.com 302
^https?:\/\/(www.)?taobao\.com\/ https://taobao.com/ 302
^https?:\/\/(www.)?jd\.com\/ https://www.jd.com/ 302
^https?:\/\/(www.)?mi\.com\/ https://www.mi.com/ 302
^https?:\/\/you\.163\.com\/ https://you.163.com/ 302
^https?:\/\/(www.)?suning\.com\/ https://suning.com/ 302
^https?:\/\/(www.)?yhd\.com\/ https://yhd.com/ 302
#
# ipados update blocked
^https:\/\/mesu\.apple\.com\/assets\/com_apple_MobileAsset_SoftwareUpdate\/com_apple_MobileAsset_SoftwareUpdate\.xml - reject

#
[Script]
#testflight.apple.com
TestFlight区域限制解除 = type=http-request,script-path=https://gist.githubusercontent.com/NobyDa/9be418b93afc5e9c8a8f4d28ae403cf2/raw/TF_Download.js,pattern=^https?:\/\/testflight\.apple\.com\/v2\/accounts\/.*\/apps\/\d*/builds/\d*/install,max-size=1048576,requires-body=true,timeout=10,enable=true
#
# > 阿里云盘签到
# auth.aliyundrive.com
#阿里云盘签到cookie = type=http-response,script-path=https://raw.githubusercontent.com/lowking/Scripts/master/ali/aliYunPanCheckIn.js,pattern=https:\/\/auth.aliyundrive.com\/v2\/account\/token,max-size=131072,requires-body=true,timeout=10,script-update-interval=0,enable=false
#
#阿里云盘签到 = type=cron,script-path=https://raw.githubusercontent.com/lowking/Scripts/master/ali/aliYunPanCheckIn.js,cronexpr="8 8 8 * * ?",timeout=10,script-update-interval=0,enable=false

[MITM]
hostname = -auth.aliyundrive.com,testflight.apple.com,www.google.cn,www.firefox.com.cn,api.abema.io,-gateway.icloud.com, -gateway.icloud.com.cn, -weather-data.apple.com, -buy.itunes.apple.com,mesu.apple.com
#
ca-p12 = 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
ca-passphrase = Shadowrocket
enable = true
